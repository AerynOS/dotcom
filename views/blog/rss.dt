doctype xml

rss(version="2.0")
    - import vibe.inet.message : writeRFC822DateTimeString;
    - import std.datetime.systime;
    - import std.datetime.timezone : UTC;
    - import std.algorithm : filter;
    - import std.array : appender;
    - import std.range : empty, take;
    - import website.models.post : PostType;
    channel
        title Serpent OS Blog Posts
        link https://serpentos.com
        description Serpent OS - Redefining Linux distribution
        image
            url https://serpentos.com/static/img/blog/the-big-update/nspawn.webp
            link https://serpentos.com
            title Serpent OS Development
        // 25 latest posts
        - foreach (post; posts.filter!((p) => p.type == PostType.RegularPost).take(25))
        - {
            item
                title=post.title
                link=post.slug
                description=post.processedSummary
                - auto dateString = appender!string;
                - writeRFC822DateTimeString(dateString, SysTime.fromUnixTime(post.tsCreated, UTC()));
                pubDate=dateString[]
                - if (!post.featuredImage.empty)
                - {
                    image
                        url https://serpentos.com/static#{post.featuredImage}
                        link https://serpentos.com
                        title Featured image
                - }
        - }
